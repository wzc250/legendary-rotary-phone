<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QQæŠ½å¥–åŠ©æ‰‹ - å®æ—¶åŒæ­¥ç‰ˆ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a2980, #26d0ce);
            color: #333;
            line-height: 1.6;
            padding: 15px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            width: 100%;
            max-width: 600px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.25);
            overflow: hidden;
            position: relative;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        header {
            background: linear-gradient(to right, #ff5e62, #ff9966);
            color: white;
            padding: 20px 15px;
            text-align: center;
            position: relative;
            border-bottom: 3px solid rgba(255, 255, 255, 0.2);
        }
        
        header h1 {
            font-size: 1.8rem;
            margin-bottom: 8px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        header p {
            font-size: 1rem;
            opacity: 0.9;
            margin-top: 5px;
        }
        
        .connection-status {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(0, 0, 0, 0.2);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
        }
        
        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #ff4757;
        }
        
        .status-dot.connected {
            background: #2ed573;
        }
        
        .user-info {
            background: #f8f9fa;
            padding: 12px 15px;
            text-align: center;
            border-bottom: 1px solid #eee;
            font-weight: bold;
            color: #ff5e62;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .user-info span {
            padding: 5px 15px;
            background: #e9ecef;
            border-radius: 20px;
            font-size: 0.95rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .section {
            padding: 20px 15px;
            border-bottom: 1px solid #eee;
        }
        
        .section-title {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            color: #ff5e62;
            gap: 10px;
        }
        
        .section-title h2 {
            font-size: 1.4rem;
        }
        
        .admin-section {
            border: 3px solid #ff5e62;
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            background: #fff9f9;
            box-shadow: 0 5px 15px rgba(255, 94, 98, 0.1);
        }
        
        .admin-label {
            background: linear-gradient(to right, #ff5e62, #ff9966);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 15px;
            font-size: 0.95rem;
            box-shadow: 0 3px 8px rgba(255, 94, 98, 0.3);
        }
        
        .prize-item {
            display: flex;
            margin-bottom: 15px;
            gap: 10px;
            align-items: center;
        }
        
        .prize-item input {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s;
            background: white;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .prize-item input:focus {
            border-color: #ff5e62;
            outline: none;
            box-shadow: 0 0 0 3px rgba(255, 94, 98, 0.2);
        }
        
        .btn {
            background: linear-gradient(to right, #ff5e62, #ff9966);
            color: white;
            border: none;
            padding: 14px 20px;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(255, 94, 98, 0.3);
            width: 100%;
            margin-top: 10px;
            gap: 8px;
        }
        
        .btn:active {
            transform: translateY(2px);
            box-shadow: 0 2px 8px rgba(255, 94, 98, 0.3);
        }
        
        #addPrize {
            background: linear-gradient(to right, #38ef7d, #11998e);
            box-shadow: 0 4px 12px rgba(56, 239, 125, 0.3);
        }
        
        #drawButton {
            background: linear-gradient(to right, #ff9966, #ff5e62);
            padding: 16px;
            font-size: 1.15rem;
            margin-top: 15px;
        }
        
        #resetButton {
            background: linear-gradient(to right, #9e9e9e, #616161);
        }
        
        .winner-list {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-top: 15px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .winner-item {
            padding: 15px;
            margin: 12px 0;
            background: linear-gradient(to right, #e0f7fa, #bbdefb);
            border-radius: 12px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
            animation: fadeIn 0.5s ease;
        }
        
        .winner-item strong {
            color: #ff5e62;
            font-size: 1.1rem;
            display: block;
            margin-bottom: 5px;
        }
        
        .hidden {
            display: none;
        }
        
        .counter {
            display: flex;
            justify-content: space-around;
            text-align: center;
            margin: 20px 0;
            gap: 15px;
        }
        
        .counter-item {
            background: linear-gradient(to right, #f0f4ff, #e6e9ff);
            padding: 18px 10px;
            border-radius: 15px;
            flex: 1;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        
        .counter-item h3 {
            color: #5e72e4;
            margin-bottom: 10px;
            font-size: 0.95rem;
        }
        
        .counter-item .number {
            font-size: 2rem;
            font-weight: bold;
            color: #ff5e62;
            line-height: 1.2;
        }
        
        .toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.85);
            color: white;
            padding: 12px 30px;
            border-radius: 30px;
            z-index: 1000;
            animation: fadeInOut 3s;
            display: none;
            max-width: 90%;
            text-align: center;
            font-size: 0.95rem;
        }
        
        @keyframes fadeInOut {
            0% { opacity: 0; top: 10px; }
            10% { opacity: 1; top: 20px; }
            90% { opacity: 1; top: 20px; }
            100% { opacity: 0; top: 10px; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .sync-indicator {
            position: absolute;
            top: 15px;
            left: 15px;
            display: flex;
            align-items: center;
            gap: 6px;
            color: #5e72e4;
            font-size: 0.85rem;
            background: rgba(94, 114, 228, 0.1);
            padding: 5px 12px;
            border-radius: 20px;
        }
        
        .sync-pulse {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #5e72e4;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.4; }
            100% { opacity: 1; }
        }
        
        .participant-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .participant-card {
            background: #e3f2fd;
            padding: 10px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.85rem;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .room-id-display {
            background: #fff8e1;
            padding: 10px 15px;
            border-radius: 10px;
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .room-id {
            font-weight: bold;
            letter-spacing: 1px;
        }
        
        .copy-btn {
            background: #ff9800;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .join-section {
            background: #e8f5e9;
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            text-align: center;
        }
        
        #joinButton {
            background: linear-gradient(to right, #4caf50, #2e7d32);
            margin-top: 15px;
        }
        
        .join-form {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .join-form input {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            font-size: 1rem;
        }
        
        .join-form button {
            background: #4caf50;
            color: white;
            border: none;
            padding: 0 20px;
            border-radius: 12px;
            cursor: pointer;
        }
        
        .tab-container {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid #eee;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background: #f0f4ff;
            border-radius: 10px 10px 0 0;
            margin-right: 5px;
        }
        
        .tab.active {
            background: #5e72e4;
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @media (max-width: 480px) {
            .counter {
                flex-direction: column;
            }
            
            .prize-item {
                flex-direction: column;
            }
            
            header h1 {
                font-size: 1.5rem;
            }
            
            .join-form {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="toast" id="toast"></div>
    
    <div class="container">
        <header>
            <div class="sync-indicator">
                <div class="sync-pulse"></div>
                <span>å®æ—¶åŒæ­¥ä¸­</span>
            </div>
            
            <h1><i class="fas fa-sync-alt"></i> QQå®æ—¶æŠ½å¥–åŠ©æ‰‹</h1>
            <p>æ‰€æœ‰å‚ä¸è€…åŒæ­¥æ›´æ–°æŠ½å¥–çŠ¶æ€</p>
            
            <div class="connection-status">
                <div class="status-dot" id="statusDot"></div>
                <span id="connectionStatus">æœªè¿æ¥</span>
            </div>
        </header>
        
        <div class="user-info">
            <span id="userName">æœªåŠ å…¥</span>
            <span id="userRole">æœªåŠ å…¥</span>
        </div>
        
        <div class="section">
            <div class="tab-container">
                <div class="tab active" data-tab="create">åˆ›å»ºæˆ¿é—´</div>
                <div class="tab" data-tab="join">åŠ å…¥æˆ¿é—´</div>
            </div>
            
            <div class="tab-content active" id="createTab">
                <div class="section-title">
                    <i class="fas fa-plus-circle"></i>
                    <h2>åˆ›å»ºæ–°æŠ½å¥–æˆ¿é—´</h2>
                </div>
                
                <div class="join-section">
                    <p>ä½œä¸ºç®¡ç†å‘˜åˆ›å»ºæ–°çš„æŠ½å¥–æˆ¿é—´</p>
                    <button id="createButton" class="btn">
                        <i class="fas fa-plus"></i> åˆ›å»ºæŠ½å¥–æˆ¿é—´
                    </button>
                </div>
            </div>
            
            <div class="tab-content" id="joinTab">
                <div class="section-title">
                    <i class="fas fa-sign-in-alt"></i>
                    <h2>åŠ å…¥æŠ½å¥–æˆ¿é—´</h2>
                </div>
                
                <div class="join-section">
                    <p>è¾“å…¥æˆ¿é—´IDåŠ å…¥å·²æœ‰æŠ½å¥–æˆ¿é—´</p>
                    <div class="join-form">
                        <input type="text" id="roomIdInput" placeholder="è¾“å…¥æˆ¿é—´ID">
                        <button id="joinButton">
                            <i class="fas fa-sign-in-alt"></i> åŠ å…¥
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="room-id-display" id="roomIdDisplay" style="display: none;">
                <div>
                    <i class="fas fa-door-open"></i> æˆ¿é—´ID: 
                    <span class="room-id" id="roomId">XXXX-XXXX</span>
                </div>
                <button class="copy-btn" id="copyRoomId">
                    <i class="fas fa-copy"></i> å¤åˆ¶
                </button>
            </div>
        </div>
        
        <div id="adminSection" class="section hidden">
            <div class="section-title">
                <i class="fas fa-crown"></i>
                <h2>ç®¡ç†å‘˜æ§åˆ¶é¢æ¿</h2>
            </div>
            
            <div class="admin-section">
                <span class="admin-label"><i class="fas fa-lock"></i> å¥–é¡¹è®¾ç½®</span>
                
                <div id="prizesContainer">
                    <div class="prize-item">
                        <input type="text" placeholder="ä¸€ç­‰å¥–ï¼ˆå¦‚ï¼šiPhone 15ï¼‰" class="prize-name" value="ä¸€ç­‰å¥–">
                        <input type="number" placeholder="æ•°é‡" class="prize-count" min="1" value="1">
                    </div>
                    <div class="prize-item">
                        <input type="text" placeholder="äºŒç­‰å¥–ï¼ˆå¦‚ï¼šAirPods Proï¼‰" class="prize-name" value="äºŒç­‰å¥–">
                        <input type="number" placeholder="æ•°é‡" class="prize-count" min="1" value="2">
                    </div>
                </div>
                
                <button id="addPrize" class="btn"><i class="fas fa-plus"></i> æ·»åŠ å¥–é¡¹</button>
                <button id="resetButton" class="btn"><i class="fas fa-redo"></i> é‡ç½®æŠ½å¥–</button>
                <button id="drawButton" class="btn"><i class="fas fa-dice"></i> å¼€å§‹æŠ½å¥–</button>
            </div>
        </div>
        
        <div id="statsSection" class="section hidden">
            <div class="section-title">
                <i class="fas fa-chart-bar"></i>
                <h2>å®æ—¶æŠ½å¥–ç»Ÿè®¡</h2>
            </div>
            
            <div class="counter">
                <div class="counter-item">
                    <h3><i class="fas fa-users"></i> å‚ä¸è€…</h3>
                    <div class="number" id="participantCount">0</div>
                </div>
                <div class="counter-item">
                    <h3><i class="fas fa-trophy"></i> å¥–é¡¹æ•°</h3>
                    <div class="number" id="prizeCount">0</div>
                </div>
                <div class="counter-item">
                    <h3><i class="fas fa-gift"></i> å¥–å“æ•°</h3>
                    <div class="number" id="awardCount">0</div>
                </div>
            </div>
            
            <div class="participant-grid" id="participantGrid">
                <!-- å‚ä¸è€…å¡ç‰‡å°†é€šè¿‡JSåŠ¨æ€æ·»åŠ  -->
            </div>
        </div>
        
        <div class="section">
            <div class="section-title">
                <i class="fas fa-award"></i>
                <h2>å®æ—¶ä¸­å¥–åå•</h2>
            </div>
            
            <div class="winner-list" id="winnersContainer">
                <div class="winner-item">
                    <strong><i class="fas fa-hourglass-half"></i> ç­‰å¾…å¼€å¥–...</strong> 
                    <p>åŠ å…¥æˆ¿é—´å¹¶å¼€å§‹æŠ½å¥–åæ˜¾ç¤ºç»“æœ</p>
                </div>
            </div>
        </div>
        
        <div class="section">
            <div class="section-title">
                <i class="fas fa-info-circle"></i>
                <h2>ä½¿ç”¨è¯´æ˜</h2>
            </div>
            <div style="padding: 10px; font-size: 0.9rem; line-height: 1.7;">
                <p><strong>ç®¡ç†å‘˜ï¼š</strong></p>
                <p>1. ç‚¹å‡»"åˆ›å»ºæŠ½å¥–æˆ¿é—´"æˆä¸ºç®¡ç†å‘˜</p>
                <p>2. å¤åˆ¶æˆ¿é—´IDå¹¶åˆ†äº«ç»™å‚ä¸è€…</p>
                <p>3. åœ¨"å¥–é¡¹è®¾ç½®"ä¸­ä¿®æ”¹å¥–é¡¹åç§°å’Œæ•°é‡</p>
                <p>4. ç‚¹å‡»"å¼€å§‹æŠ½å¥–"è¿›è¡ŒæŠ½å¥–</p>
                
                <p><strong>å‚ä¸è€…ï¼š</strong></p>
                <p>1. åˆ‡æ¢åˆ°"åŠ å…¥æˆ¿é—´"æ ‡ç­¾é¡µ</p>
                <p>2. è¾“å…¥ç®¡ç†å‘˜æä¾›çš„æˆ¿é—´ID</p>
                <p>3. ç‚¹å‡»"åŠ å…¥"æŒ‰é’®å‚ä¸æŠ½å¥–</p>
                <p>4. ç­‰å¾…ç®¡ç†å‘˜å¼€å§‹æŠ½å¥–</p>
            </div>
        </div>
    </div>

    <script>
        // æˆ¿é—´å’Œç”¨æˆ·ç®¡ç†
        let roomId = null;
        let participants = [];
        let currentUser = null;
        let isAdmin = false;
        
        // æ˜¾ç¤ºToastæç¤º
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.style.display = 'block';
            
            setTimeout(() => {
                toast.style.display = 'none';
            }, 3000);
        }
        
        // ç”Ÿæˆéšæœºç”¨æˆ·å
        function generateRandomName() {
            const adjectives = ['å¿«ä¹', 'èªæ˜', 'å¹¸è¿', 'å‹‡æ•¢', 'é˜³å…‰', 'æœºæ™º', 'é­…åŠ›', 'æ— æ•Œ'];
            const nouns = ['ç†ŠçŒ«', 'è€è™', 'ç‹®å­', 'æµ·è±š', 'çŒè±¹', 'å‡¤å‡°', 'å·¨é¾™', 'éº’éºŸ'];
            const adj = adjectives[Math.floor(Math.random() * adjectives.length)];
            const noun = nouns[Math.floor(Math.random() * nouns.length)];
            return adj + noun + Math.floor(Math.random() * 100);
        }
        
        // åˆ›å»ºæˆ¿é—´
        function createRoom() {
            // ç”Ÿæˆæˆ¿é—´ID
            roomId = "ROOM-" + Math.random().toString(36).substring(2, 8).toUpperCase();
            document.getElementById('roomId').textContent = roomId;
            document.getElementById('roomIdDisplay').style.display = 'flex';
            
            // åˆ›å»ºç”¨æˆ·
            currentUser = {
                id: 'user-' + Date.now(),
                name: generateRandomName(),
                isAdmin: true
            };
            
            // æ·»åŠ åˆ°å‚ä¸è€…åˆ—è¡¨
            participants = [currentUser];
            
            // æ›´æ–°UI
            updateUI();
            
            // æ˜¾ç¤ºåˆ›å»ºæˆåŠŸæ¶ˆæ¯
            showToast(`${currentUser.name} å·²åˆ›å»ºæˆ¿é—´ï¼`);
            showToast('æ‚¨æ˜¯ç®¡ç†å‘˜ï¼å¯ä»¥è®¾ç½®å¥–é¡¹å¹¶å¼€å§‹æŠ½å¥–');
            
            // æ˜¾ç¤ºç®¡ç†å‘˜é¢æ¿
            document.getElementById('adminSection').classList.remove('hidden');
        }
        
        // åŠ å…¥æˆ¿é—´
        function joinRoom() {
            const inputRoomId = document.getElementById('roomIdInput').value.trim();
            if (!inputRoomId) {
                showToast('è¯·è¾“å…¥æˆ¿é—´ID');
                return;
            }
            
            // æ¨¡æ‹ŸåŠ å…¥æˆ¿é—´ï¼ˆåœ¨å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šéªŒè¯æˆ¿é—´IDï¼‰
            if (inputRoomId !== roomId) {
                showToast('æˆ¿é—´IDæ— æ•ˆï¼Œè¯·ç¡®è®¤åé‡è¯•');
                return;
            }
            
            // åˆ›å»ºç”¨æˆ·
            currentUser = {
                id: 'user-' + Date.now(),
                name: generateRandomName(),
                isAdmin: false
            };
            
            // æ·»åŠ åˆ°å‚ä¸è€…åˆ—è¡¨
            participants.push(currentUser);
            
            // æ›´æ–°UI
            updateUI();
            
            // æ˜¾ç¤ºåŠ å…¥æˆåŠŸæ¶ˆæ¯
            showToast(`${currentUser.name} å·²åŠ å…¥æˆ¿é—´ï¼`);
        }
        
        // æ›´æ–°UIçŠ¶æ€
        function updateUI() {
            if (!currentUser) return;
            
            // æ›´æ–°ç”¨æˆ·ä¿¡æ¯
            document.getElementById('userName').textContent = currentUser.name;
            document.getElementById('userRole').textContent = currentUser.isAdmin ? 'ç®¡ç†å‘˜' : 'å‚ä¸è€…';
            document.getElementById('userRole').style.background = currentUser.isAdmin ? '#ff5e62' : '#38ef7d';
            
            // æ›´æ–°è¿æ¥çŠ¶æ€
            document.getElementById('statusDot').className = 'status-dot connected';
            document.getElementById('connectionStatus').textContent = `å·²è¿æ¥ ${participants.length}äºº`;
            
            // æ˜¾ç¤ºç»Ÿè®¡åŒºåŸŸ
            document.getElementById('statsSection').classList.remove('hidden');
            
            // æ›´æ–°å‚ä¸è€…æ•°é‡
            document.getElementById('participantCount').textContent = participants.length;
            
            // æ¸²æŸ“å‚ä¸è€…ç½‘æ ¼
            renderParticipantGrid();
        }
        
        // æ¸²æŸ“å‚ä¸è€…ç½‘æ ¼
        function renderParticipantGrid() {
            const grid = document.getElementById('participantGrid');
            grid.innerHTML = '';
            
            participants.forEach(participant => {
                const card = document.createElement('div');
                card.className = 'participant-card';
                card.innerHTML = `
                    <div>${participant.name}</div>
                    <small>${participant.isAdmin ? 'ğŸ‘‘ ç®¡ç†å‘˜' : 'ğŸ‘¤ å‚ä¸è€…'}</small>
                `;
                grid.appendChild(card);
            });
        }
        
        // å¼€å§‹æŠ½å¥–
        function startLottery() {
            if (!isAdmin) return;
            
            // è·å–æ‰€æœ‰å¥–é¡¹
            const prizeItems = document.querySelectorAll('.prize-item');
            const prizes = [];
            prizeItems.forEach(item => {
                const name = item.querySelector('.prize-name').value;
                const count = parseInt(item.querySelector('.prize-count').value) || 1;
                if (name) {
                    prizes.push({name, count});
                }
            });
            
            if (prizes.length === 0) {
                showToast('è¯·è‡³å°‘è®¾ç½®ä¸€ä¸ªå¥–é¡¹ï¼');
                return;
            }
            
            // æ›´æ–°å¥–é¡¹ç»Ÿè®¡
            æ–‡ä»¶.getElementById('prizeCount').textContent = prizes.length;
            const awardCount = prizes.reduce((sum, prize) => sum + prize.count, 0);
            æ–‡ä»¶.getElementById('awardCount').textContent = awardCount;
            
            // æ¸…ç©ºä¸­å¥–åå•
            const winnersContainer = æ–‡ä»¶.getElementById('winnersContainer');
            winnersContainer.innerHTML = '';
            
            // æ·»åŠ æŠ½å¥–ä¸­çŠ¶æ€
            const drawingElement = æ–‡ä»¶.createElement('div');
            drawingElement.className = 'winner-item';
            drawingElement.innerHTML = `
                <strong><i class="fas fa-spinner fa-spin"></i> æŠ½å¥–è¿›è¡Œä¸­...</strong>
                <p>æ­£åœ¨è®¡ç®—ä¸­å¥–ç»“æœï¼Œè¯·ç¨å€™</p>
            `;
            winnersContainer.appendChild(drawingElement);
            
            // æ¨¡æ‹ŸæŠ½å¥–è¿‡ç¨‹ï¼ˆ2ç§’åæ˜¾ç¤ºç»“æœï¼‰
            setTimeout(() => {
                winnersContainer.innerHTML = '';
                
                // æ·»åŠ æ ‡é¢˜
                const titleElement = document.createElement('div');
                titleElement.className = 'winner-item';
                titleElement.style.background = 'linear-gradient(to right, #ffecd2, #fcb69f)';
                titleElement.innerHTML = '<strong><i class="fas fa-trophy"></i> ä¸­å¥–åå•å…¬å¸ƒ</strong>';
                winnersContainer.appendChild(titleElement);
                
                // æ¨¡æ‹Ÿä¸­å¥–ç»“æœ
                let winnerIndex = 0;
                prizes.foreach(prize => {
                    const winnerElement = document.createElement('div');
                    winnerElement.className = 'winner-item winner-highlight';
                    
                    // æ˜¾ç¤ºä¸­å¥–è€…
                    const winnerNames = [];
                    for (let i = 0; i < prize.count && winnerIndex < participants.length; i++) {
                        winnerNames.push(participants[winnerIndex].name);
                        winnerIndex++;
                    }
                    
                    winnerElement.innerHTML = `
                        <strong>${prize.name}:</strong> ${winnerNames.join('ã€')}
                    `;
                    winnersContainer.appendChild(winnerElement);
                });
                
                showToast('æŠ½å¥–å®Œæˆï¼ç»“æœå·²åŒæ­¥ç»™æ‰€æœ‰å‚ä¸è€…');
            }, 2000);
        }
        
        // é‡ç½®æŠ½å¥–
        function resetLottery() {
            if (!isAdmin) return;
            
            showToast('æŠ½å¥–å·²é‡ç½®ï¼çŠ¶æ€åŒæ­¥ç»™æ‰€æœ‰å‚ä¸è€…');
            
            // é‡ç½®å¥–é¡¹è®¾ç½®
            document.getElementById('prizesContainer').innerHTML = `
                <div class="prize-item">
                    <input type="text" placeholder="ä¸€ç­‰å¥–ï¼ˆå¦‚ï¼šiPhone 15ï¼‰" class="prize-name" value="ä¸€ç­‰å¥–">
<input type="number"placeholder="æ•°é‡"class="prize-count"min="1"value="1">
</div>
                <div class="prize-item">
                    <input type="text" placeholder="äºŒç­‰å¥–ï¼ˆå¦‚ï¼šAirPods Proï¼‰" class="prize-name" value="äºŒç­‰å¥–">
                    <input type="number" placeholder="æ•°é‡" class="prize-count" min="1" value="2">
                </div>
`;
            
// é‡ç½®ç»Ÿè®¡
æ–‡ä»¶ã€‚getElementById('prizeCount')ã€‚textContent='0'ï¼›
æ–‡ä»¶ã€‚getElementById('awardCount')ã€‚textContent='0'ï¼›
            
// é‡ç½®ä¸­å¥–åå•
const winnersContainer=æ–‡ä»¶.getElementById('winnersContainer')ï¼›
winnersContainer.innerHTML='
<div ç­çº§="winner-item">
<strong><i ç­çº§="fas fa-hourglass-half"></i>ç­‰å¾…å¼€å¥–...</strong>
<p>æŠ½å¥–ç»“æŸåå°†åœ¨æ­¤å¤„å…¬å¸ƒä¸­å¥–åå•</p>
</div>
`;
        }
        
// é¡µé¢åˆå§‹åŒ–
å‡½æ•°initPage(){
// è®¾ç½®æ ‡ç­¾é¡µåˆ‡æ¢
document.querySelectorAll('.tab').forEach(tab=>{
tab.addEventListener('click'ï¼Œ()=>{
//ç§»é™¤æ‰€æœ‰æ´»è·ƒçš„ç±»
æ–‡ä»¶ã€‚querySelectorAll('.æ ‡ç­¾')ã€‚foreach(t=>t.classList.remove('active'))ï¼›
æ–‡ä»¶ã€‚querySelectorAll('.tab-content').foreach(c=>c.classList.remove('active'))ï¼›
                    
//æ·»åŠ æ´»è·ƒçš„ç±»åˆ°å½“å‰æ ‡ç­¾
æ ‡ç­¾.classList.add('active')ï¼›
+
                });
            });
            
//è®¾ç½®æˆ¿é—´IDå¤åˆ¶åŠŸèƒ½
æ–‡ä»¶ã€‚getElementById('copyRoomId').AddEventListener('click'ï¼Œ()=>{
navigator.clipboard.writeText(roomid)ï¼›
showToast('æˆ¿é—´IDå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼')ï¼›
            });
            
// åˆ›å»ºæˆ¿é—´æŒ‰é’®
æ–‡ä»¶ã€‚getElementById('createButton').AddEventListener('click'ï¼ŒcreateRoom)ï¼›
            
// åŠ å…¥æˆ¿é—´æŒ‰é’®
æ–‡ä»¶ã€‚getElementById('joinButton').AddEventListener('click'ï¼ŒjoinRoom)ï¼›
            
// æ·»åŠ å¥–é¡¹æŒ‰é’®
æ–‡ä»¶ã€‚getElementById('addPrize').AddEventListener('click'ï¼Œ()=>{
=
=
newPrize.className='prize-item'ï¼›
newPrize.innerHTML='
<
<
`;
å®¹å™¨.appendChild(newPrize)ï¼›
showToast('å·²æ·»åŠ ä¸€ä¸ªæ–°å¥–é¡¹')ï¼›
            });
            
// æŠ½å¥–æŒ‰é’®
æ–‡ä»¶ã€‚getElementById('drawButton').addEventListener('å•å‡»'ï¼ŒstartLottery)ï¼›
            
// é‡ç½®æŒ‰é’®
æ–‡ä»¶ã€‚getElementById('resetButton').addEventListener('å•å‡»'ï¼ŒresetLottery)ï¼›
            
// æŒ‰å›è½¦åŠ å…¥æˆ¿é—´
æ–‡ä»¶ã€‚getElementById('roomIdInput')ã€‚addEventListener('keyup'ï¼Œ(e)=>{
if(e.key==='Enter'){
joinRoom()ï¼›
                }
            });
        }
        
// é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
çª—æˆ·ã€‚addEventListener('DOMContentLoaded'ï¼ŒinitPage)ï¼›
</è„šæœ¬>
</èº«ä½“>
</è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€>
